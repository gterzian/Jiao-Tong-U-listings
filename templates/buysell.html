
<head>
    <meta charset="utf-8">
   
    <!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><![endif]-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Buy and Sell Books </title>

   <style> body { padding-top: 70px; }</style>
</head>


<body>

  {{> navbar}}
  <div class='container-fluid'>
   
    <div class="row">

      <div class="col-xs-12 col-sm-6 col-md-8">
        {{> welcome}} 
        {{> books}}
      </div>
       <div class="col-xs-6 col-md-4"> {{> message}}</div>
    </div>
 </div>
</body>

<template name='welcome'>
  
   <div class="alert alert-info" role="alert"><h1>Welcome, Buy and sell your study books here! {{> loginButtons}}</h1>
     
   </div>
  
</template>

<template name='message'>
  
  
  
</template>


<template name='navbar'>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
       <div class="navbar-header">
             <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
               <span class="sr-only">Toggle navigation</span>
               <span class="icon-bar"></span>
               <span class="icon-bar"></span>
               <span class="icon-bar"></span>
             </button>
             <a class="navbar-brand" href="">Buy/Sell</a>
           </div>
           
          <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                 
                  <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Choose Book Level<span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                    {{#each categories}}
                    <li><a class='choose_category' id='{{this}}' href="#">{{this}}</a></li>
                    {{/each}}
                    </ul>
                  </li>
                </ul>
                
              </div>
            
              
              
      </div>
    </nav> 
</template>



<template name='books'>
  
  <div class="panel-group" id="accordion">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title">
          <a data-toggle="collapse" data-parent="#accordion" href="#new_book">
            <span class="glyphicon glyphicon-plus"></span> Add a book
          </a>
        </h4>
      </div>
      <div id="new_book" class="panel-collapse collapse ">
        <div class="panel-body">
           <div class="alert alert-info" role="alert">
             {{#if currentUser}}
            <form class="form-horizontal" role="form">  
              <div class="form-group">
                 <input type="text" class="form-control" id="title" placeholder="Title..."> 
               </div>    
               <div class="form-group">
                  <input type="text" class="form-control" id="price" placeholder="Price..."> 
                </div>   
             <div class="form-group">
                             <label class="col-sm-2 control-label" for="category">Level:</label>
                             <div class="col-sm-10">
                               <select class=" form-control" id="category" name="category">
                      {{ #each categories }}
             <option value="{{this}}">{{this}}</option>
                      {{/each}}
             
             </select>
           </div>
         </div>
             <div class="form-group">
                             <label class="col-sm-2 control-label" for="condition">Level:</label>
                             <div class="col-sm-10">
                               <select class=" form-control" id="condition" name="condition">
                      {{ #each conditions }}
             <option value="{{this}}">{{this}}</option>
                      {{/each}}
             
             </select>
           </div>
           </div>
              <div class="form-group">
             <button  id='add_book' class="btn btn-default">Add</button>
           </div>
            </form>
            {{else}}
            <h2>Please login/register first </h2>
              {{/if}}
         </div>
        </div>
      </div>
    </div>
  </div>
  
  
  <h1>Books in {{current_category}}</h1>
  
  
  {{ #each books }}
  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a data-toggle="collapse" class='accordion' data-parent="#accordion" href="#{{_id}}">
         {{title}}, {{condition}}
        </a>
        
      </h4>
    </div>
    <div id="{{_id}}" class="panel-collapse collapse ">
      <div class="panel-body">
         {{#if currentUser}}
       <button type="button" id='{{_id}}' class="contact_owner btn btn-default" >Contact owner</button>
       {{#if sending_message _id }}
         <form class="form-inline" role="form">         
              <div class="form-group">
                 <input type="text" class="form-control" id="message_content" placeholder="type something..."> 
               </div>
              <button role='submit'  id='send_message' class="btn btn-default">Send</button>
             </form>
       {{/if}}
       {{ else }}
         <button type="button" class="btn btn-default" disabled="disabled">Contact onwer</button>
         <p>Please log in before contacting owner</p>
       {{/if}}
      </div>
    </div>
  </div>
  
  {{ /each }}
  
  
  
</template>
